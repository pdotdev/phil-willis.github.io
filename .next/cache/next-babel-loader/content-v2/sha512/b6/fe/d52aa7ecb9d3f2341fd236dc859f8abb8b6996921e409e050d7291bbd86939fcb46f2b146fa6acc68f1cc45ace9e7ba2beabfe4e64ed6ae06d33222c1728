{"ast":null,"code":"import fs from \"fs\";\nimport { join } from \"path\";\nimport matter from \"gray-matter\";\nconst postsDirectory = join(process.cwd(), \"_posts\");\nexport function getSlugs() {\n  return fs.readdirSync(postsDirectory).map(d => d.replace(/\\.mdx$/, \"\"));\n}\nexport function getPostBySlug(slug, fields = []) {\n  const file = join(postsDirectory, `${slug}.mdx`);\n  const fileContents = fs.readFileSync(file, \"utf8\");\n  const {\n    data,\n    content\n  } = matter(fileContents);\n  const items = {};\n  fields.forEach(field => {\n    if (field == \"slug\") {\n      items[field] = slug;\n    }\n\n    if (field == \"content\") {\n      items[field] = content;\n    }\n\n    if (data[field]) {\n      items[field] = data[field];\n    }\n  });\n  return items;\n}\nexport function getAllPosts(fields = []) {\n  const slugs = getSlugs();\n  const posts = slugs.map(slug => getPostBySlug(slug, fields)) // sort posts by date in descending order\n  .sort((post1, post2) => post1.date > post2.date ? \"-1\" : \"1\");\n  return posts;\n}","map":null,"metadata":{},"sourceType":"module"}